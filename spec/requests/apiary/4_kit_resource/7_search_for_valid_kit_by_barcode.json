
{"steps":[{"header":["Accept: application/json"],"response_header":["Content-Type: application/json"],"description":"**Search for a valid kit by barcode**\n\n* `description` describe the search\n* `model` searched model (in our case: Kit)\n* `criteria` set parameters for the search\n* The Kit's expires field should be greater then or equal to current date and\n* the Kit's amount field should be greater then 0\n\nThe search below returns kits with \n- expiry date gretaer or equals then 2013-04-24 and less then 2013-05-28\n- and amount of kit is equals 10.\n- and has a label with the following attributes:\n  - position: front barcode\n  - type: \"ean13-barcode\",\n  - value: \"1234567890123\"\n\nTo actually get the search results, you need to access the first page of result \nthanks to the `first` action in the JSON response.\n","method":"POST","url":"/searches","setup":"kit1 = Lims::SupportApp::Kit.new(:process => \"DNA & RNA extraction\",\n  :aliquot_type => \"NA+P\",\n  :expires => \"2013-03-01\",\n  :amount => 10)\nlabellable1 = Lims::LaboratoryApp::Labels::Labellable.new(:name => \"11111111-2222-3333-4444-666666666666\",\n                                                    :type => \"resource\")\nlabel1 = Lims::LaboratoryApp::Labels::Labellable::Label.new(:type => \"ean13-barcode\",\n                                                      :value => \"1234567890123\")\nlabellable1[\"front barcode\"] = label1\n\nkit2 = Lims::SupportApp::Kit.new(:process => \"DNA & RNA extraction\",\n  :aliquot_type => \"NA+P\",\n  :expires => \"2013-05-01\",\n  :amount => 10)\nlabellable2 = Lims::LaboratoryApp::Labels::Labellable.new(:name => \"11111111-2222-3333-4444-777777777777\",\n                                                    :type => \"resource\")\nlabel2 = Lims::LaboratoryApp::Labels::Labellable::Label.new(:type => \"ean13-barcode\",\n                                                      :value => \"1234567890123\")\nlabellable2[\"front barcode\"] = label2\n\nkit3 = Lims::SupportApp::Kit.new(:process => \"DNA & RNA extraction\",\n  :aliquot_type => \"NA+P\",\n  :expires => \"2013-05-01\",\n  :amount => 15)\nlabellable3 = Lims::LaboratoryApp::Labels::Labellable.new(:name => \"11111111-2222-3333-4444-888888888888\",\n                                                    :type => \"resource\")\nlabel3 = Lims::LaboratoryApp::Labels::Labellable::Label.new(:type => \"ean13-barcode\",\n                                                      :value => \"1234567890123\")\nlabellable3[\"front barcode\"] = label3\n\nsave_with_uuid kit1 => [1,2,3,4,6], kit2 => [1,2,3,4,7], kit3 => [1,2,3,4,8], labellable1 => [1,2,3,4,1], labellable2 => [1,2,3,4,2], labellable3 => [1,2,3,4,3]\n","parameters":"{ \"search\": {\n    \"description\": \"search for valid kit(s) by barcode\",\n    \"model\": \"kit\",\n    \"criteria\": {\n        \"comparison\": {\n            \"expires\": {\n                \">=\": \"2013-04-24\",\n                \"<\": \"2013-05-28\"\n            },\n            \"amount\": {\n                \"=\": 10\n            }\n        },\n        \"label\": {\n            \"position\": \"front barcode\",\n            \"type\": \"ean13-barcode\",\n            \"value\": \"1234567890123\"\n        }\n    }\n}}\n","status":200,"response":"{\n    \"search\": {\n        \"actions\": {\n            \"read\": \"/11111111-2222-3333-4444-555555555555\",\n            \"first\": \"/11111111-2222-3333-4444-555555555555/page=1\",\n            \"last\": \"/11111111-2222-3333-4444-555555555555/page=-1\"\n        },\n        \"uuid\": \"11111111-2222-3333-4444-555555555555\"\n    }\n}\n"},{"header":["Accept: application/json"],"response_header":["Content-Type: application/json"],"description":"Get the search result","method":"GET","url":"/11111111-2222-3333-4444-555555555555/page=1","status":200,"response":"{\n\"actions\": {\n  \"read\": \"http://example.org/kits/page=1\",\n  \"first\": \"http://example.org/kits/page=1\",\n  \"last\": \"http://example.org/kits/page=-1\"\n},\n\"size\": 1,\n\"kits\": [\n  {\n    \"actions\": {\n      \"read\": \"http://example.org/11111111-2222-3333-4444-777777777777\",\n      \"create\": \"http://example.org/11111111-2222-3333-4444-777777777777\",\n      \"update\": \"http://example.org/11111111-2222-3333-4444-777777777777\",\n      \"delete\": \"http://example.org/11111111-2222-3333-4444-777777777777\"\n    },\n    \"uuid\": \"11111111-2222-3333-4444-777777777777\",\n    \"process\": \"DNA & RNA extraction\",\n    \"aliquotType\": \"NA+P\",\n    \"expires\": \"2013-05-01\",\n    \"amount\": 10,\n    \"labels\": {\n        \"actions\": {\n            \"read\": \"http://example.org/11111111-2222-3333-4444-222222222222\",\n            \"create\": \"http://example.org/11111111-2222-3333-4444-222222222222\",\n            \"update\": \"http://example.org/11111111-2222-3333-4444-222222222222\",\n            \"delete\": \"http://example.org/11111111-2222-3333-4444-222222222222\"\n        },\n        \"uuid\": \"11111111-2222-3333-4444-222222222222\",\n        \"front barcode\": {\n            \"value\": \"1234567890123\",\n            \"type\": \"ean13-barcode\"\n        }\n    }\n  }\n]}\n"}]}
